{
  "id": "2026-01-28-feature-phase1-foundation",
  "version": "1.0.0",
  "metadata": {
    "title": "Phase 1: Foundation - Project Infrastructure Setup",
    "description": "Establish project infrastructure, FastAPI backend, database connectivity, user model, repository layer, and PWA frontend foundation following TDD methodology.",
    "type": "feature",
    "priority": "very-high",
    "story_points": 13,
    "created_at": "2026-01-28T00:00:00Z",
    "github_issue": null,
    "github_issue_number": null,
    "author": "claude-code"
  },
  "completion": {
    "promise": "PLAN_COMPLETE",
    "criteria": [
      {
        "id": "CC01",
        "description": "All backend unit tests pass",
        "verification": "test",
        "verification_command": "cd /home/sean/git_wsl/strictly-dancing/backend && uv run pytest -v",
        "passes": false
      },
      {
        "id": "CC02",
        "description": "Backend health endpoint returns 200",
        "verification": "api",
        "verification_command": "curl -s http://localhost:8001/health | jq",
        "passes": false
      },
      {
        "id": "CC03",
        "description": "TypeScript build succeeds",
        "verification": "build",
        "verification_command": "cd /home/sean/git_wsl/strictly-dancing/frontend && bun run tsc",
        "passes": false
      },
      {
        "id": "CC04",
        "description": "Python linting passes",
        "verification": "lint",
        "verification_command": "cd /home/sean/git_wsl/strictly-dancing/backend && ruff check .",
        "passes": false
      }
    ]
  },
  "tasks": [
    {
      "id": "T001",
      "title": "Initialize Backend FastAPI Project",
      "description": "Set up Python backend with FastAPI, UV for dependencies, pyproject.toml, and basic application structure.",
      "passes": false,
      "phase": "implementation",
      "dependencies": [],
      "acceptance_criteria": [
        {
          "id": "AC01",
          "criterion": "pyproject.toml exists with FastAPI, SQLAlchemy, Pydantic dependencies",
          "verification": "file_exists",
          "met": false
        },
        {
          "id": "AC02",
          "criterion": "backend/app/main.py exists with FastAPI app factory",
          "verification": "file_exists",
          "met": false
        },
        {
          "id": "AC03",
          "criterion": "Health endpoint GET /health returns 200 with JSON response",
          "verification": "test",
          "met": false
        },
        {
          "id": "AC04",
          "criterion": "Unit test for health endpoint exists and passes",
          "verification": "test",
          "met": false
        }
      ],
      "testing": {
        "unit_tests": [
          "test_health_endpoint_returns_200",
          "test_health_endpoint_returns_json"
        ]
      }
    },
    {
      "id": "T002",
      "title": "Configure Backend Core Settings",
      "description": "Create core configuration module with environment variable loading, CORS middleware, and logging setup.",
      "passes": false,
      "phase": "implementation",
      "dependencies": ["T001"],
      "acceptance_criteria": [
        {
          "id": "AC01",
          "criterion": "backend/app/core/config.py exists with Settings class using pydantic-settings",
          "verification": "file_exists",
          "met": false
        },
        {
          "id": "AC02",
          "criterion": "CORS middleware configured for development (localhost origins)",
          "verification": "code_review",
          "met": false
        },
        {
          "id": "AC03",
          "criterion": "Logging configured with structlog JSON output",
          "verification": "code_review",
          "met": false
        },
        {
          "id": "AC04",
          "criterion": "Unit test for config loading from environment",
          "verification": "test",
          "met": false
        }
      ],
      "testing": {
        "unit_tests": [
          "test_config_loads_from_environment",
          "test_config_has_required_fields"
        ]
      }
    },
    {
      "id": "T003",
      "title": "Configure Database Connection",
      "description": "Set up SQLAlchemy 2.0 async connection with asyncpg to AWS RDS PostgreSQL.",
      "passes": false,
      "phase": "implementation",
      "dependencies": ["T002"],
      "acceptance_criteria": [
        {
          "id": "AC01",
          "criterion": "backend/app/core/database.py exists with async engine and session factory",
          "verification": "file_exists",
          "met": false
        },
        {
          "id": "AC02",
          "criterion": "Connection pooling configured (min=2, max=10)",
          "verification": "code_review",
          "met": false
        },
        {
          "id": "AC03",
          "criterion": "get_db dependency for FastAPI routes exists",
          "verification": "file_exists",
          "met": false
        },
        {
          "id": "AC04",
          "criterion": "DATABASE_URL environment variable used",
          "verification": "code_review",
          "met": false
        }
      ],
      "testing": {
        "unit_tests": [
          "test_database_session_creates",
          "test_database_url_from_config"
        ]
      }
    },
    {
      "id": "T004",
      "title": "Initialize Alembic Migrations",
      "description": "Set up Alembic with async support and create initial migration for extensions.",
      "passes": false,
      "phase": "implementation",
      "dependencies": ["T003"],
      "acceptance_criteria": [
        {
          "id": "AC01",
          "criterion": "backend/alembic/ directory exists with alembic.ini",
          "verification": "file_exists",
          "met": false
        },
        {
          "id": "AC02",
          "criterion": "Alembic env.py configured for async SQLAlchemy",
          "verification": "code_review",
          "met": false
        },
        {
          "id": "AC03",
          "criterion": "Initial migration creates uuid-ossp extension",
          "verification": "file_exists",
          "met": false
        }
      ],
      "testing": {
        "unit_tests": []
      }
    },
    {
      "id": "T005",
      "title": "Create User Database Model",
      "description": "Implement User SQLAlchemy model with all required fields and create migration.",
      "passes": false,
      "phase": "implementation",
      "dependencies": ["T004"],
      "acceptance_criteria": [
        {
          "id": "AC01",
          "criterion": "backend/app/models/user.py exists with User model",
          "verification": "file_exists",
          "met": false
        },
        {
          "id": "AC02",
          "criterion": "User has fields: id (UUID), email, password_hash, first_name, last_name, user_type, email_verified, is_active, created_at, updated_at",
          "verification": "code_review",
          "met": false
        },
        {
          "id": "AC03",
          "criterion": "Email has unique constraint",
          "verification": "code_review",
          "met": false
        },
        {
          "id": "AC04",
          "criterion": "user_type is ENUM (client, host, both)",
          "verification": "code_review",
          "met": false
        },
        {
          "id": "AC05",
          "criterion": "Alembic migration for users table exists",
          "verification": "file_exists",
          "met": false
        }
      ],
      "testing": {
        "unit_tests": [
          "test_user_model_instantiation",
          "test_user_model_has_required_fields"
        ]
      }
    },
    {
      "id": "T006",
      "title": "Create User Pydantic Schemas",
      "description": "Define Pydantic schemas for user request/response validation.",
      "passes": false,
      "phase": "implementation",
      "dependencies": ["T005"],
      "acceptance_criteria": [
        {
          "id": "AC01",
          "criterion": "backend/app/schemas/user.py exists",
          "verification": "file_exists",
          "met": false
        },
        {
          "id": "AC02",
          "criterion": "UserCreate, UserUpdate, UserResponse schemas defined",
          "verification": "code_review",
          "met": false
        },
        {
          "id": "AC03",
          "criterion": "Email validation implemented",
          "verification": "test",
          "met": false
        },
        {
          "id": "AC04",
          "criterion": "password_hash never exposed in UserResponse",
          "verification": "test",
          "met": false
        }
      ],
      "testing": {
        "unit_tests": [
          "test_user_create_schema_validates_email",
          "test_user_response_excludes_password_hash"
        ]
      }
    },
    {
      "id": "T007",
      "title": "Implement User Repository Layer",
      "description": "Create UserRepository with async CRUD operations following repository pattern.",
      "passes": false,
      "phase": "implementation",
      "dependencies": ["T006"],
      "acceptance_criteria": [
        {
          "id": "AC01",
          "criterion": "backend/app/repositories/user.py exists",
          "verification": "file_exists",
          "met": false
        },
        {
          "id": "AC02",
          "criterion": "UserRepository has create(), get_by_id(), get_by_email(), update(), soft_delete() methods",
          "verification": "code_review",
          "met": false
        },
        {
          "id": "AC03",
          "criterion": "exists_by_email() method for registration checks",
          "verification": "code_review",
          "met": false
        },
        {
          "id": "AC04",
          "criterion": "All queries use async patterns",
          "verification": "code_review",
          "met": false
        }
      ],
      "testing": {
        "unit_tests": [
          "test_user_repository_create",
          "test_user_repository_get_by_email",
          "test_user_repository_exists_by_email"
        ]
      }
    },
    {
      "id": "T008",
      "title": "Initialize PWA Frontend Project",
      "description": "Set up React + Vite + TypeScript frontend with TanStack Router.",
      "passes": false,
      "phase": "implementation",
      "dependencies": ["T001"],
      "acceptance_criteria": [
        {
          "id": "AC01",
          "criterion": "frontend/package.json exists with React, Vite, TanStack Router dependencies",
          "verification": "file_exists",
          "met": false
        },
        {
          "id": "AC02",
          "criterion": "frontend/vite.config.ts configured with PWA plugin",
          "verification": "file_exists",
          "met": false
        },
        {
          "id": "AC03",
          "criterion": "frontend/src/routes/__root.tsx exists with basic layout",
          "verification": "file_exists",
          "met": false
        },
        {
          "id": "AC04",
          "criterion": "TypeScript strict mode enabled in tsconfig.json",
          "verification": "code_review",
          "met": false
        },
        {
          "id": "AC05",
          "criterion": "bun run dev starts development server on port 5175",
          "verification": "test",
          "met": false
        }
      ],
      "testing": {
        "unit_tests": []
      }
    },
    {
      "id": "T009",
      "title": "Configure Frontend API Client",
      "description": "Set up OpenAPI client with TanStack Query for type-safe API calls.",
      "passes": false,
      "phase": "implementation",
      "dependencies": ["T008"],
      "acceptance_criteria": [
        {
          "id": "AC01",
          "criterion": "frontend/src/lib/api/client.ts exists with openapi-fetch setup",
          "verification": "file_exists",
          "met": false
        },
        {
          "id": "AC02",
          "criterion": "frontend/src/lib/api/$api.ts exists with TanStack Query hooks",
          "verification": "file_exists",
          "met": false
        },
        {
          "id": "AC03",
          "criterion": "generate-types script in package.json",
          "verification": "code_review",
          "met": false
        },
        {
          "id": "AC04",
          "criterion": "API base URL configurable via environment variable",
          "verification": "code_review",
          "met": false
        }
      ],
      "testing": {
        "unit_tests": []
      }
    },
    {
      "id": "T010",
      "title": "Create Homepage Route",
      "description": "Implement basic homepage with navigation structure.",
      "passes": false,
      "phase": "implementation",
      "dependencies": ["T009"],
      "acceptance_criteria": [
        {
          "id": "AC01",
          "criterion": "frontend/src/routes/index.tsx exists with homepage component",
          "verification": "file_exists",
          "met": false
        },
        {
          "id": "AC02",
          "criterion": "Homepage displays 'Strictly Dancing' title",
          "verification": "visual",
          "met": false
        },
        {
          "id": "AC03",
          "criterion": "Navigation includes links to Login, Register (future)",
          "verification": "code_review",
          "met": false
        },
        {
          "id": "AC04",
          "criterion": "Responsive layout works on mobile",
          "verification": "visual",
          "met": false
        }
      ],
      "testing": {
        "unit_tests": []
      }
    }
  ],
  "global_context": {
    "project_root": "/home/sean/git_wsl/strictly-dancing",
    "playwright_verification_required": false,
    "tdd_methodology": "Write tests alongside implementation, run tests AFTER both are complete"
  }
}
